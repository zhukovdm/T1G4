{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/T1G4/DOX/schema.json",
  "definitions": {
    "agency":{
      "type":"object",
      "required":[
        "legalName",
        "email",
        "phone"
      ],
      "properties":{
        "legalName":{
          "type":"string"
        },
        "email":{
          "type":"string",
          "format":"email"
        },
        "phone":{
          "type":"integer"
        }
      }
    },
    "train":{
      "properties":{
        "id":{
          "type":"integer"
        },
        "electricMotor":{
          "type":"boolean"
        },
        "europeanVehicleNumber":{
          "type":"string"
        }
      },
      "additionalProperties": false,
      "minProperties": 3
    },
    "bus":{
      "properties":{
        "id":{
          "type":"integer"
        },
        "licensePlateNumber":{
          "type":"string"
        }
      },
      "additionalProperties":false,
      "minProperties":2
    },
    "vehicle":{
      "properties":{
        "capacity":{
          "type":"integer",
          "minimum":0
        },
        "consumption":{
          "type":"integer",
          "minimum":0
        },
        "purchasePrice":{
          "type":"integer"
        }
      },
      "additionalProperties":false,
      "minProperties":3,
      "oneOf":[
        {"$ref":"#/bus"},
        {"$ref":"#/train"}
      ]
    },
    "connection":{
      "properties":{
        "id":{
          "type":"integer"
        },
        "belongsTo":{
          "$ref":"#/transitRoute"
        },
        "connects":{
          "type":"array",
          "minItems":2,
          "items":[
            {"$ref":"#/stop"}
          ]
        }
      },
      "additionalProperties":false,
      "minProperties":3
    },
    "stop":{
      "properties":{
        "id":{
          "type":"integer"
        },
        "gps":{
          "type":"string",
          "pattern":"[0-9]{1,2}.[0-9]{7}[N], [0-9]{1,2}.[0-9]{7}[E]"
        },
        "arrivalTime":{
          "type":"string",
          "format":"time"
        },
        "departureTime":{
          "type":"string",
          "format":"time"
        }
      },
      "additionalProperties":false,
      "minProperties":4
    },
    "transitRoute":{
      "properties":{
        "id":{
          "type":"integer"
        },
        "length":{
          "type":"number",
          "minimum":0
        },
        "validFrom":{
          "type": "string",
          "format": "date-time"
        },
        "validTo":{
          "type": "string",
          "format": "date-time"
        },
        "startsWith":{
          "$ref":"#/station"
        },
        "endsWith":{
          "$ref":"#/station"
        }
      },
      "additionalProperties":false,
      "minProperties":6
    },
    "busStation":{
    },
    "trainStation":{
    },
    "station":{
      "properties":{
        "id":{
          "type":"integer"
        },
        "stationName":{
          "type":"string"
        },
        "capacity":{
          "type":"integer"
        }
      },
      "additionalProperties":false,
      "minProperties":3,
      "oneOf":[
        {"$ref":"#/busStation"},
        {"$ref":"#/trainStation"}
      ]
    }
    
  }
}